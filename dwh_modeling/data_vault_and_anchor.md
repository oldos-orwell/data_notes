**Anchor model** и **Data Vault** - методологии гибкого проектирования DWH, где под гибкстью понимается:
1. Ранняя поставка и быстрая доработка — это значит, что в идеале первый результат до того, как полностью спроектирована и внедрена система целиком. При этом каждая следующая доработка тоже должна занимать как можно меньше времени.
2. Итеративная доработка — это значит, что каждая следующая доработка в идеале не должна затрагивать уже работающий функционал. 
3. Постоянная адаптация к меняющимся требованиям бизнеса — общая объектная структура должна быть спроектирована не просто с учетом возможного расширения а с расчетом на то, что направление этого очередного расширения не могло бы вам даже присниться на этапе проектирования.

<img src="https://github.com/oldos-orwell/data_notes/blob/main/images/dv.png"/>
<img src="https://github.com/oldos-orwell/data_notes/blob/main/images/anchor.png"/>
<img src="https://github.com/oldos-orwell/data_notes/blob/main/images/dv-vs-anchor.png"/>

Какие проблемы решают методологии (в сравнении со звездой):
1. Жесткая кардинальность связей - в классических подходах при проектировании хранилища определяются типы связей измерений и фактов. Дальнейшие изменения типов связей (например, было - 1-1, стало - 1-м) ведут к сложным доработкам объектов. В DV и AM связи между объектами не хранятся в атрибутах родительских сущностей, а представляют собой отдельный тип объектов. Такая структура становится толерантной не только к изменению кардинальностей существующих связей, но и к добавлению новых.
2. Дублирование данных - в DV и AM данные нормализуются, а атрибуты с разной частотой изменений хранятся в разных версионных таблицах.
3. Нелинейная сложность доработки - в DV и AM добавление как отдельных атрибутов, так и целых новых предметных областей в такой модели выглядит как надстройка над существующим набором объектов без их изменения.

Минусы гибких методологий: 
* декомпозиция данных, лежащая в основе модульности гибких архитектур, приводит к увеличению количества таблиц и, соответственно, накладных расходов на джойны при выборке.
* атрибуты одной сущности хранятся в разных таблицах и нужно учитывать их версионность.

Другие объекты гибких методологий:
* Point-In-Time в DV - таблицы, в которых хранится пересечение версий сущности из всех саттелитов. Призвана упростить поиск версии сущности, основанной на нескольких саттелитах.
* Bridge - таблицы для проектирования связей М-М


  
___
[DataVault / Anchor Modeling / Николай Голов - YouTube](https://www.youtube.com/watch?v=-ZgzpQXsxi0&list=WL&index=16&t=11s&ab_channel=DataLearn)   
[DataVault2 Anchor Modeling / Николай Голов - YouTube](https://www.youtube.com/watch?v=IZw1cB1uDts&list=WL&index=6&ab_channel=DataLearn)  
[Activity Schema / Николай Голов - YouTube](https://www.youtube.com/watch?v=JXdz7-hCJyI&ab_channel=DataLearn)  
  
[DV / AM - Обзор гибких методологий проектирования DWH - Habr](https://habr.com/ru/companies/glowbyte/articles/515940/)

[PIT таблицы](http://www.dwh-club.com/ru/dwh-bi-articles/data-vault-daty-okonchaniya-zaprosy-soedinenii.html])  
[Handling many-to-many joins using a bridge table](http://davidlai101.com/blog/2017/08/03/handling-many-to-many-joins-using-a-bridge-table-part-1/)
